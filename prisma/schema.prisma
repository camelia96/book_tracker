generator client {
  provider = "prisma-client"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model books {
  id             Int              @id @default(autoincrement()) @db.SmallInt
  created_at     DateTime         @default(now()) @db.Timestamptz(6)
  name           String           @db.VarChar
  author         String
  year           Int?             @db.SmallInt
  total_pages    Int              @db.SmallInt
  category_id    Int              @db.SmallInt
  img_url        String?          @db.VarChar
  categories     categories       @relation(fields: [category_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  books_profiles books_profiles[]
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model books_profiles {
  id                      Int                       @id @default(autoincrement()) @db.SmallInt
  created_at              DateTime                  @default(now()) @db.Timestamptz(6)
  book_id                 Int                       @db.SmallInt
  profile_id              Int                       @db.SmallInt
  status_id               Int                       @db.SmallInt
  notes                   String?
  books                   books                     @relation(fields: [book_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  profiles                profiles                  @relation(fields: [profile_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  statuses                statuses                  @relation(fields: [status_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  books_profiles_progress books_profiles_progress[]
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model books_profiles_progress {
  id              Int            @id @default(autoincrement()) @db.SmallInt
  created_at      DateTime       @default(now()) @db.Timestamptz(6)
  book_profile_id Int            @db.SmallInt
  date            DateTime       @db.Timestamptz(6)
  read_pages      Int            @db.SmallInt
  books_profiles  books_profiles @relation(fields: [book_profile_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model categories {
  id         Int      @id @default(autoincrement()) @db.SmallInt
  created_at DateTime @default(now()) @db.Timestamptz(6)
  category   String   @db.VarChar
  books      books[]
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model profiles {
  id             Int              @id(map: "profile_pkey") @default(autoincrement()) @db.SmallInt
  created_at     DateTime         @default(now()) @db.Timestamptz(6)
  username       String           @db.VarChar
  books_profiles books_profiles[]
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model statuses {
  id             Int              @id @default(autoincrement()) @db.SmallInt
  created_at     DateTime         @default(now()) @db.Timestamptz(6)
  status         String           @db.VarChar
  books_profiles books_profiles[]
}

model User {
  id            String    @id @default(cuid())
  name          String?
  email         String?   @unique
  emailVerified DateTime?
  image         String?
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt
  accounts      Account[]
  sessions      Session[]
}

model Account {
  userId                   String
  type                     String
  provider                 String
  providerAccountId        String
  refresh_token            String?
  access_token             String?
  expires_at               Int?
  token_type               String?
  scope                    String?
  id_token                 String?
  session_state            String?
  createdAt                DateTime @default(now())
  updatedAt                DateTime @updatedAt
  refresh_token_expires_in Int?
  user                     User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@id([provider, providerAccountId])
}

model Session {
  sessionToken String   @unique
  userId       String
  expires      DateTime
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
  user         User     @relation(fields: [userId], references: [id], onDelete: Cascade)
}

model VerificationToken {
  identifier String
  token      String
  expires    DateTime

  @@id([identifier, token])
}
