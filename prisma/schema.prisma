generator client {
  provider = "prisma-client"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model books {
  id             Int              @id @default(autoincrement()) @db.SmallInt
  created_at     DateTime         @default(now()) @db.Timestamptz(6)
  modified_at    DateTime         @default(now()) @db.Timestamptz(6)
  name           String           @db.VarChar
  author         String           @db.VarChar
  year           Int?             @db.SmallInt
  total_pages    Int              @db.SmallInt
  category_id    Int              @db.SmallInt
  img_url        String?          @db.VarChar
  categories     categories       @relation(fields: [category_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  books_profiles books_profiles[]
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model books_profiles {
  id                      Int                       @id @default(autoincrement()) @db.SmallInt
  created_at              DateTime                  @default(now()) @db.Timestamptz(6)
  modified_at             DateTime                  @default(now()) @db.Timestamptz(6)
  notes                   String?
  book_id                 Int                       @db.SmallInt
  profile_id              Int                       @db.SmallInt
  status_id               Int                       @db.SmallInt
  books                   books                     @relation(fields: [book_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  profiles                profiles                  @relation(fields: [profile_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  statuses                statuses                  @relation(fields: [status_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  books_profiles_progress books_profiles_progress[]
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model books_profiles_progress {
  id              Int            @id @default(autoincrement()) @db.SmallInt
  created_at      DateTime       @default(now()) @db.Timestamptz(6)
  modified_at     DateTime       @default(now()) @db.Timestamptz(6)
  date            DateTime       @db.Timestamptz(6)
  read_pages      Int            @db.SmallInt
  book_profile_id Int            @db.SmallInt
  books_profiles  books_profiles @relation(fields: [book_profile_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model categories {
  id          Int      @id @default(autoincrement()) @db.SmallInt
  created_at  DateTime @default(now()) @db.Timestamptz(6)
  modified_at DateTime @default(now()) @db.Timestamptz(6)
  category    String   @db.VarChar
  books       books[]
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model profiles {
  id             Int              @id(map: "profile_pkey") @default(autoincrement()) @db.SmallInt
  created_at     DateTime         @default(now()) @db.Timestamptz(6)
  modified_at    DateTime         @default(now()) @db.Timestamptz(6)
  username       String           @db.VarChar
  books_profiles books_profiles[]
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model statuses {
  id             Int              @id @default(autoincrement()) @db.SmallInt
  created_at     DateTime         @default(now()) @db.Timestamptz(6)
  modified_at    DateTime         @default(now()) @db.Timestamptz(6)
  status         String           @db.VarChar
  books_profiles books_profiles[]
}
